name = "ido-epo-translator"
main = "_worker.js"  # Worker entry (serves API + static assets)
compatibility_date = "2024-09-23"

# Static assets binding for Workers (serves files from Vite build output)
[assets]
directory = "dist"
binding = "ASSETS"
run_worker_first = true

# Production variables (non-secret)
[vars]
APY_SERVER_URL = "http://ec2-52-211-137-158.eu-west-1.compute.amazonaws.com"
REBUILD_WEBHOOK_URL = "http://ec2-52-211-137-158.eu-west-1.compute.amazonaws.com/rebuild"

# SECURITY: REBUILD_SHARED_SECRET must be set as a Cloudflare Worker secret, NOT in wrangler.toml
# Set it using: echo "SECRET_VALUE" | npx wrangler secret put REBUILD_SHARED_SECRET

# Note: To deploy to production (default environment), use: wrangler deploy --env=""
# or just: wrangler deploy (will use default top-level config)

[env.dev]
[env.dev.vars]
# Local development only
APY_SERVER_URL = "http://localhost:2737"
# For local testing only; set production values as Worker secrets/vars in Dashboard
REBUILD_WEBHOOK_URL = "http://localhost/rebuild"
